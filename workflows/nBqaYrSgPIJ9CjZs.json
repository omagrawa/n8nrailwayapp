{"createdAt":"2025-07-28T13:11:50.808Z","updatedAt":"2025-07-28T13:11:50.808Z","id":"nBqaYrSgPIJ9CjZs","name":"My workflow 13","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-736,16],"id":"e1aa420e-3455-44e8-8f8c-d4f440e4a222","name":"When clicking ‘Execute workflow’"},{"parameters":{"functionCode":"items.forEach(item => {\n  item.json.conversionRate = (item.json.conversions / item.json.leads) * 100;\n});\nreturn items;"},"name":"Calculate Conversion Rate","type":"n8n-nodes-base.function","typeVersion":1,"position":[336,208],"id":"ed698a85-2531-40a8-a501-3b367ce81b64"},{"parameters":{"functionCode":"items.forEach(item => {\n  const scores = item.json.qualityScores;\n  const avgQuality = scores.reduce((a, b) => a + b, 0) / scores.length;\n  item.json.averageLeadQuality = avgQuality;\n});\nreturn items;"},"name":"Analyze Lead Quality","type":"n8n-nodes-base.function","typeVersion":1,"position":[640,208],"id":"976599f0-af8d-4e5b-9c47-c9b33be7c3d6"},{"parameters":{"functionCode":"items.forEach(item => {\n  const timeline = item.json.timeline;\n  item.json.activityTimeline = {\n    start: timeline[0],\n    end: timeline[timeline.length - 1]\n  };\n});\nreturn items;"},"name":"Aggregate Timeline","type":"n8n-nodes-base.function","typeVersion":1,"position":[928,208],"id":"11ccf148-e423-4547-91a3-f27c4817cac9"},{"parameters":{"functionCode":"const agentStats = {};\nitems.forEach(item => {\n  const agent = item.json.agent;\n  if (!agentStats[agent]) {\n    agentStats[agent] = { campaigns: 0, totalConversions: 0 };\n  }\n  agentStats[agent].campaigns += 1;\n  agentStats[agent].totalConversions += item.json.conversions;\n});\n\nreturn Object.entries(agentStats).map(([agent, stats]) => {\n  return {\n    json: {\n      agent,\n      ...stats,\n      avgConversions: stats.totalConversions / stats.campaigns\n    }\n  };\n});"},"name":"Summarize Agent Performance","type":"n8n-nodes-base.function","typeVersion":1,"position":[1216,208],"id":"78bf8ce4-00a2-41f2-ba0c-44e326c1bfa0"},{"parameters":{"functionCode":"return [\n  {\n    json: {\n      campaignId: \"CAMP001\",\n      leads: 100,\n      conversions: 25,\n      agent: \"Agent A\",\n      timeline: [\"2025-07-01\", \"2025-07-10\"],\n      qualityScores: [80, 60, 75, 90, 50]\n    }\n  },\n  {\n    json: {\n      campaignId: \"CAMP002\",\n      leads: 80,\n      conversions: 10,\n      agent: \"Agent B\",\n      timeline: [\"2025-07-03\", \"2025-07-12\"],\n      qualityScores: [55, 65, 70, 45, 50]\n    }\n  }\n];"},"name":"Campaign Data","type":"n8n-nodes-base.function","typeVersion":1,"position":[80,208],"id":"cde23a39-7948-43de-98f6-8a589ea6a25c"},{"parameters":{"content":"## Start\nStarts the workflow manually for testing or demonstration.","height":352},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[0,0],"id":"ccefd338-da71-4904-908a-6249f5d3fcac","name":"Sticky Note"},{"parameters":{"content":"## Conversion Rate\n Calculates the conversion rate for each campaign using:\n    conversionRate Eg = (conversions / leads) * 100\nAdds a new field: `conversionRate` to each item.","height":352,"color":2},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[272,0],"id":"cb38e227-a12d-4dfa-b98f-2e772acf5560","name":"Sticky Note1"},{"parameters":{"content":"## Analyze Lead Quality\n Analyzes the lead quality by computing the average of the `qualityScores` array.\nAdds a new field: `averageLeadQuality`.","height":352,"color":3},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[560,0],"id":"8ecf6392-fcf7-406e-9c6b-033d3510f4fb","name":"Sticky Note2"},{"parameters":{"content":"## Timeline\n Extracts the `start` and `end` dates  for the aggrigaate timeline","height":352,"color":4},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[848,0],"id":"c0b47f62-24bc-4d4c-8b98-6a73709445ec","name":"Sticky Note3"},{"parameters":{"content":"## Summarize Agent Performance\n- Aggregates campaign stats per agent.\n- Counts how many campaigns each agent ran.\n- Sums total conversions.\n- Calculates average conversions per campaign.","height":352,"width":320,"color":5},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1136,0],"id":"04304e34-f1bb-495d-8a34-64dfd3ec66be","name":"Sticky Note4"}],"connections":{"Calculate Conversion Rate":{"main":[[{"node":"Analyze Lead Quality","type":"main","index":0}]]},"Analyze Lead Quality":{"main":[[{"node":"Aggregate Timeline","type":"main","index":0}]]},"Aggregate Timeline":{"main":[[{"node":"Summarize Agent Performance","type":"main","index":0}]]},"Campaign Data":{"main":[[{"node":"Calculate Conversion Rate","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"7301c421-602a-4cd6-8682-8c652ae0e19e","triggerCount":0,"tags":[]}